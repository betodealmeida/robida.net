<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>robida.net</title>
        {% for rel, endpoint in links.items() %}
        <link rel="{{ rel }}" href="{{ endpoint }}">
        {% endfor %}
        <link rel="stylesheet" href="/static/css/simple.min.css">
        <link rel="stylesheet" href="/static/css/custom.css">
    </head>
    <body>
        <header>
            <h1>Robida</h1>
        </header>

        <main>
            <h2>Authorization request</h2>

            <p>
                <strong><a href="{{ client_info.url }}">{{ client_info.name }}</a></strong>
                is requesting access to your identity and the following scopes:
            </p>

            <form action="/auth/redirect" method="post">
                <input type="hidden" id="redirect_uri" name="redirect_uri" value="{{ redirect_uri }}" />
                <input type="hidden" id="code" name="code" value="{{ code }}" />

                {% if known_requested_scopes %}
                <h3>Known scopes</h3>
                {% for scope in known_requested_scopes %}
                <input checked type="checkbox" id="{{ scope }}" name="known" value="{{ scope }}">
                <label for="{{ scope }}">{{ scope }}</label><br>
                {% endfor %}
                {% endif %}

                {% if unknown_requested_scopes %}
                <h3>Unknown scopes</h3>
                {% for scope in unknown_requested_scopes %}
                <input checked type="checkbox" id="{{ scope }}" name="unknown" value="{{ scope }}">
                <label for="{{ scope }}">{{ scope }}</label><br>
                {% endfor %}
                {% endif %}

                {% if other_scopes %}
                <h3>Other supported scopes</h3>
                {% for scope in other_scopes %}
                <input type="checkbox" id="{{ scope }}" name="other" value="{{ scope }}">
                <label for="{{ scope }}">{{ scope }}</label><br>
                {% endfor %}
                {% endif %}

                <p><input type="submit" value="Allow" /></p>
            </form>
        </main>

        <footer>
            <p>
                <a
                    class="copyright"
                    href="https://creativecommons.org/licenses/by-sa/4.0/"
                    title="CC BY-SA 4.0"
                >
                    <img src="/static/img/cc.svg" alt="CC">
                    <img src="/static/img/by.svg" alt="BY">
                    <img src="/static/img/sa.svg" alt="SA">
                </a>
                2024
                <a href="https://github.com/betodealmeida/robida.net/">robida.net</a>
            </p>
        </footer>
    </body>
</html>
